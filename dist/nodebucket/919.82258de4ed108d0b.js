"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[919],{4919:(M,l,a)=>{a.r(l),a.d(l,{SecurityModule:()=>I});var d=a(6814),c=a(2129),s=a(95),g=a(9862),e=a(4769);let p=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-security"]],decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"router-outlet")},dependencies:[c.lC],encapsulation:2}),i})();var m=a(459);let f=(()=>{var n;class i{constructor(t){this.http=t}findEmployeeById(t){return this.http.get("api/employees/"+t)}}return(n=i).\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function h(n,i){if(1&n&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",o.errorMessage," ")}}function v(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Sign In"),e.qZA())}function y(n,i){1&n&&(e.TgZ(0,"div"),e._UZ(1,"span",17),e._uU(2,"Loading... "),e.qZA())}const S=[{path:"",component:p,children:[{path:"signin",component:(()=>{var n;class i{constructor(t,r,u,C,Z){this.fb=t,this.router=r,this.cookieService=u,this.secService=C,this.route=Z,this.isLoading=!1,this.signinForm=this.fb.group({empId:[null,s.kI.compose([s.kI.required,s.kI.pattern("^[0-9]*$")])]}),this.sessionUser={},this.errorMessage=""}signin(){this.isLoading=!0;const t=this.signinForm.controls.empId.value;if(!t||isNaN(parseInt(t,10)))return this.errorMessage="The employee ID you entered is invalid, please try again",void(this.isLoading=!1);this.secService.findEmployeeById(t).subscribe({next:r=>{this.sessionUser=r,this.cookieService.set("session_user",t,1),this.cookieService.set("session_name",`${r.firstName} ${r.lastName}`,1);const u=this.route.snapshot.queryParamMap.get("returnUrl")||"/";this.isLoading=!1,this.router.navigate([u])},error:r=>{this.isLoading=!1,this.errorMessage=r.error.message?r.err.message:r.message}})}}return(n=i).\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(c.F0),e.Y36(m.N),e.Y36(f),e.Y36(c.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-signin"]],decls:20,vars:4,consts:[[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-4","col-md-g","col-sm-6"],[1,"card","shadow","sign-in-bg"],[1,"card-title","text-center","border-bottom"],[1,"p-3"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"card","body","sign-in-bg"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["for","empId",1,"form-label"],["type","text","id","empId","formControlName","empId",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn","btn-dark"],[4,"ngIf"],["routerLink","/",1,"text-dark","text-underline-hover"],["role","alert",1,"alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6,"Employee Sign In"),e.qZA()(),e.YNc(7,h,2,1,"div",6),e.TgZ(8,"div",7)(9,"form",8),e.NdJ("ngSubmit",function(){return r.signin(),r.signinForm.reset()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Employee Id"),e.qZA(),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",12)(15,"button",13),e.YNc(16,v,2,0,"span",14),e.YNc(17,y,3,0,"div",14),e.qZA()()()()(),e.TgZ(18,"a",15),e._uU(19,"Return"),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",r.errorMessage),e.xp6(2),e.Q6J("formGroup",r.signinForm),e.xp6(7),e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading))},dependencies:[d.O5,c.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".sign-in-bg[_ngcontent-%COMP%]{background-color:#eeba35}.huff-input[_ngcontent-%COMP%]{background-color:#ffd25f}"]}),i})(),title:"Nodebucket: Sign In"}]}];let b=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(S),c.Bz]}),i})(),I=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,b,c.Bz,s.u5,s.UX,g.JF]}),i})()}}]);